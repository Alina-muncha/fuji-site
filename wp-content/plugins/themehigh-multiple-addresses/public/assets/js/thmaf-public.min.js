function thmaf_populate_selected_address(e,elm,type,key){e.preventDefault(),thmaf_address.populate_selected_address(elm,type,key)}var thmaf_address=function($,window,document){"use strict";function populate_selected_address(elm,address_type,key){var selected_address_id=key,data={action:"get_address_with_id",security:thmaf_public_var.ajax_nonce,selected_address_id:selected_address_id,selected_type:address_type};$.ajax({url:thmaf_public_var.ajax_url,data:data,type:"POST",success:function(response){var sell_countries=thmaf_public_var.sell_countries,sell_countries_size=Object.keys(sell_countries).length,address_fields=[];address_fields="billing"==address_type?thmaf_public_var.address_fields_billing:thmaf_public_var.address_fields_shipping,$.each(address_fields,function(f_key,f_type){var input_elm="";input_elm=$("radio"==f_type||"checkboxgroup"==f_type?"input[name="+f_key+"]":"#"+f_key);var skip=1==sell_countries_size&&f_key==address_type+"_country";if(1==sell_countries_size&&(skip="billing_country"==f_key),!skip&&input_elm.length){var _type=input_elm.getType(),_value=response[f_key];"file"===f_type&&(_type="file"),thmaf_public_base.set_field_value_by_elm(input_elm,_type,_value)}})}}),"billing"==address_type?$("#thmaf_hidden_field_billing").val(selected_address_id):$("#thmaf_hidden_field_shipping").val(selected_address_id)}function add_new_address(elm,address_type){var sell_countries=thmaf_public_var.sell_countries,sell_countries_size=Object.keys(sell_countries).length,address_fields=[];"billing"==address_type?(address_fields=thmaf_public_var.address_fields_billing,$("#thmaf_hidden_field_billing").val("add_address")):(address_fields=thmaf_public_var.address_fields_shipping,$("#thmaf_hidden_field_shipping").val("add_address")),$.each(address_fields,function(f_key,f_type){var input_elm="";input_elm=$("radio"==f_type||"checkboxgroup"==f_type?"input[name="+f_key+"]":"#"+f_key);var skip=1==sell_countries_size&&f_key==address_type+"_country";if(1==sell_countries_size&&(skip="billing_country"==f_key),!skip&&input_elm.length){var _type=input_elm.getType();"file"===f_type&&(_type="file"),thmaf_public_base.thmaf_set_field_value_by_elm(input_elm,_type,"")}})}var default_shipping=$("#thmaf_checkbox_shipping").val();return $("#thmaf_billing_alt").change(function(event){event.preventDefault();var select_type=this.value;"add_address"==select_type?add_new_address("","billing"):populate_selected_address("","billing",select_type)}),$("#thmaf_shipping_alt").change(function(event){event.preventDefault();var select_type=this.value;"add_address"==select_type?add_new_address("","shipping"):populate_selected_address("","shipping",select_type)}),$("#ship-to-different-address-checkbox").change(function(){$("#ship-to-different-address-checkbox").is(":checked")?$("#thmaf_checkbox_shipping").val("ship_select"):$("#thmaf_checkbox_shipping").val(default_shipping)}),{populate_selected_address:populate_selected_address,add_new_address:add_new_address}}(window.jQuery,window,document),thmaf_public_base=function($,window,document){"use strict";function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value){switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val([value]).change()):elm.val([value]).change();break;case"select":if(1==thmaf_public_var.select_options){var option_values=[];elm.find("option").each(function(option_key,option_val){""!=$(this).val()&&(option_values[option_key]=$(this).val())}),-1!=$.inArray(value,option_values)?elm.prop("multiple")?elm.val(value):elm.val([value]).change():(elm.append($("<option></option>").attr("value",value).text(value)),elm.val([value]).change())}else elm.prop("multiple")?elm.val(value):elm.val([value]).change();break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).change():elm.val([value]).change();break;case"hidden":break;default:elm.val(value).change()}}function thmaf_set_field_value_by_elm(elm,type,value){switch(elm.closest("p").removeClass("woocommerce-validated"),elm.closest("p").removeClass("woocommerce-invalid"),type){case"radio":elm.val("");break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val("")):elm.val("");break;case"select":if(1==thmaf_public_var.select_options){var option_values=[];elm.find("option").each(function(option_key,option_val){""!=$(this).val()&&(option_values[option_key]=$(this).val())}),-1!=$.inArray(value,option_values)?(elm.prop("multiple"),elm.val("")):(elm.append($("<option></option>").attr("value",value).text(value)),elm.val(""))}else elm.prop("multiple")?elm.val(""):(elm.val([value]).change(),$(".form-row.woocommerce-invalid .select2-selection").css({"border-color":"#aaa","border-width":"1px","border-style":"solid"}));break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).val(""):elm.val("");break;case"hidden":break;default:elm.val("")}}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name="+name+"]:checked").val();break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"[]']:checked").each(function(){valueArr.push($(this).val())}),value=valueArr}else value=$("input[type=checkbox][name="+name+"]:checked").val();break;case"select":case"multiselect":default:value=elm.val()}return value}return $.fn.getType=function(){try{return"INPUT"==this[0].tagName?this[0].type.toLowerCase():this[0].tagName.toLowerCase()}catch(err){return"E001"}},{display_char_count:display_char_count,set_field_value_by_elm:set_field_value_by_elm,thmaf_set_field_value_by_elm:thmaf_set_field_value_by_elm,get_field_value:get_field_value}}(window.jQuery,window,document);!function($){"use strict";!function(){$(".wrapper-class")}()}(jQuery);